{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link,useLocation,useNavigate}from\"react-router-dom\";import{Row,Col,Button,Form}from\"react-bootstrap\";import{useSelector,useDispatch}from\"react-redux\";import Message from\"../components/Message\";import Loader from\"../components/Loader\";//import FormContainer from \"../components/FormContainer\";\nimport{getUserDetails,updateUserProfile}from\"../actions/userActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ProfileScreen=()=>{// Hooks for navigation and accessing URL parameters\nconst navigate=useNavigate();const{search}=useLocation();// State for form inputs\nconst[name,setName]=useState(\"\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[confirmPassword,setConfirmPassword]=useState(\"\");const[message,setMessage]=useState(null);// Redux hooks for state management and dispatching actions\nconst dispatch=useDispatch();const userDetails=useSelector(state=>state.userDetails);const{loading,error,user}=userDetails;const userLogin=useSelector(state=>state.userLogin);const{userInfo}=userLogin;const userUpdateProfile=useSelector(state=>state.userUpdateProfile);const{success}=userUpdateProfile;// Extracting the \"redirect\" parameter from URL, defaulting to home (\"/\") if not found\nconst redirectInUrl=new URLSearchParams(search);const redirect=redirectInUrl.get(\"redirect\")||\"/\";// useEffect to handle redirection post-login based on \"userInfo\" state\nuseEffect(()=>{if(!userInfo){navigate('/login');}else{// Ensure 'user' is defined before attempting to access its properties\nif(!user||!user.name){dispatch(getUserDetails('profile'));}else{setName(user.name);setEmail(user.email);}}},[dispatch,navigate,userInfo,user]);// Handler for form submission\nconst submitHandler=e=>{e.preventDefault();// Prevent default form submission behavior\nif(password!==confirmPassword){setMessage('Password do not match');}else{// DISPATCH update profile\ndispatch(updateUserProfile({id:user._id,name,email,password}));}};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"py-3\",children:\"User Profile\"}),message&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:message}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),success&&/*#__PURE__*/_jsx(Message,{variant:\"success\",children:\"Profile Updated\"}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{style:{margin:\"10px\"},children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{style:{margin:\"10px\"},type:\"name\",placeholder:\"Enter name\",value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{style:{margin:\"10px\"},children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{style:{margin:\"10px\"},type:\"email\",placeholder:\"Enter email\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{style:{margin:\"10px\"},children:\"Password Address\"}),/*#__PURE__*/_jsx(Form.Control,{style:{margin:\"10px\"},type:\"password\",placeholder:\"Enter password\",value:password,onChange:e=>setPassword(e.target.value),className:\"py-3\"})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"confirmPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{style:{margin:\"10px\"},children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{style:{margin:\"10px\"},type:\"password\",placeholder:\"Confirm password\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),className:\"py-3\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",style:{margin:\"10px\"},children:\"Update\"})]})]}),/*#__PURE__*/_jsx(Col,{md:9,children:/*#__PURE__*/_jsx(\"h2\",{children:\"My Orders\"})})]});};export default ProfileScreen;","map":{"version":3,"names":["React","useState","useEffect","Link","useLocation","useNavigate","Row","Col","Button","Form","useSelector","useDispatch","Message","Loader","getUserDetails","updateUserProfile","jsx","_jsx","jsxs","_jsxs","ProfileScreen","navigate","search","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","message","setMessage","dispatch","userDetails","state","loading","error","user","userLogin","userInfo","userUpdateProfile","success","redirectInUrl","URLSearchParams","redirect","get","submitHandler","e","preventDefault","id","_id","children","md","className","variant","onSubmit","Group","controlId","Label","style","margin","Control","type","placeholder","value","onChange","target"],"sources":["C:/Users/oreld/git/Teach-Me/frontend/src/screens/ProfileScreen.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport { Row, Col, Button, Form } from \"react-bootstrap\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport Message from \"../components/Message\";\r\nimport Loader from \"../components/Loader\";\r\n//import FormContainer from \"../components/FormContainer\";\r\nimport { getUserDetails  , updateUserProfile} from \"../actions/userActions\";\r\n\r\nconst ProfileScreen = () => {\r\n  // Hooks for navigation and accessing URL parameters\r\n  const navigate = useNavigate();\r\n  const { search } = useLocation();\r\n\r\n  // State for form inputs\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [message, setMessage] = useState(null);\r\n\r\n  // Redux hooks for state management and dispatching actions\r\n  const dispatch = useDispatch();\r\n  const userDetails = useSelector((state) => state.userDetails);\r\n  const { loading, error, user } = userDetails;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo} = userLogin;\r\n\r\n  const userUpdateProfile = useSelector((state) => state.userUpdateProfile);\r\n  const { success } = userUpdateProfile;\r\n  // Extracting the \"redirect\" parameter from URL, defaulting to home (\"/\") if not found\r\n  const redirectInUrl = new URLSearchParams(search);\r\n  const redirect = redirectInUrl.get(\"redirect\") || \"/\";\r\n\r\n  // useEffect to handle redirection post-login based on \"userInfo\" state\r\n  useEffect(() => {\r\n    if (!userInfo) {\r\n        navigate('/login');\r\n    } else {\r\n        // Ensure 'user' is defined before attempting to access its properties\r\n        if (!user || !user.name) {\r\n            dispatch(getUserDetails('profile'));\r\n        } else {\r\n            setName(user.name);\r\n            setEmail(user.email);\r\n        }\r\n    }\r\n}, [dispatch, navigate, userInfo, user]);\r\n\r\n\r\n  // Handler for form submission\r\n  const submitHandler = (e) => {\r\n    e.preventDefault(); // Prevent default form submission behavior\r\n    if(password!==confirmPassword){\r\n        setMessage('Password do not match')\r\n    }else{\r\n        // DISPATCH update profile\r\n        dispatch(updateUserProfile({id : user._id , name , email , password}))\r\n    }\r\n  };\r\n\r\n  return <Row>\r\n    <Col md = {3}>\r\n    <h2 className=\"py-3\">User Profile</h2>\r\n      {message && <Message variant=\"danger\">{message}</Message>}\r\n      {error && <Message variant=\"danger\">{error}</Message>}\r\n      {success && <Message variant=\"success\">Profile Updated</Message>}\r\n      {loading && <Loader />}\r\n      <Form onSubmit={submitHandler}>\r\n      <Form.Group controlId=\"name\">\r\n          <Form.Label style={{ margin: \"10px\" }}>Name</Form.Label>\r\n          <Form.Control\r\n            style={{ margin: \"10px\" }}\r\n            type=\"name\"\r\n            placeholder=\"Enter name\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group controlId=\"email\">\r\n          <Form.Label style={{ margin: \"10px\" }}>Email Address</Form.Label>\r\n          <Form.Control\r\n            style={{ margin: \"10px\" }}\r\n            type=\"email\"\r\n            placeholder=\"Enter email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          ></Form.Control>\r\n        </Form.Group>\r\n\r\n        <Form.Group controlId=\"password\">\r\n          <Form.Label style={{ margin: \"10px\" }}>Password Address</Form.Label>\r\n          <Form.Control\r\n            style={{ margin: \"10px\" }}\r\n            type=\"password\"\r\n            placeholder=\"Enter password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            className=\"py-3\"\r\n          ></Form.Control>\r\n        </Form.Group>\r\n\r\n        <Form.Group controlId=\"confirmPassword\">\r\n          <Form.Label style={{ margin: \"10px\" }}>Confirm Password</Form.Label>\r\n          <Form.Control\r\n            style={{ margin: \"10px\" }}\r\n            type=\"password\"\r\n            placeholder=\"Confirm password\"\r\n            value={confirmPassword}\r\n            onChange={(e) => setConfirmPassword(e.target.value)}\r\n            className=\"py-3\"\r\n          ></Form.Control>\r\n        </Form.Group>\r\n\r\n        <Button type=\"submit\" variant=\"primary\" style={{ margin: \"10px\" }}>\r\n          Update\r\n        </Button>\r\n      </Form>\r\n    </Col>\r\n    <Col md = {9}>\r\n        <h2>My Orders</h2>\r\n    </Col>\r\n  </Row>\r\n};\r\n\r\nexport default ProfileScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}