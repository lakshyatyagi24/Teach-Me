{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link,useLocation,useNavigate}from\"react-router-dom\";import{Row,Col,Button,Form}from\"react-bootstrap\";import{useSelector,useDispatch}from\"react-redux\";import Message from\"../components/Message\";import Loader from\"../components/Loader\";import FormContainer from\"../components/FormContainer\";import{login}from\"../actions/userActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const LoginScreen=()=>{// Hooks for navigation and accessing URL parameters\nconst navigate=useNavigate();const{search}=useLocation();// State for form inputs\nconst[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");// Redux hooks for state management and dispatching actions\nconst dispatch=useDispatch();const userLogin=useSelector(state=>state.userLogin);const{loading,error,userInfo}=userLogin;// // Extracting the \"redirect\" parameter from URL, defaulting to home (\"/\") if not found\n// const redirectInUrl = new URLSearchParams(search);\n// const redirect = redirectInUrl.get(\"redirect\") || \"/\";\nconst redirectInUrl=new URLSearchParams(search).get('redirect');const redirect=redirectInUrl?redirectInUrl:'/';// useEffect to handle redirection post-login based on \"userInfo\" state\nuseEffect(()=>{if(userInfo){// Validation for redirect to prevent open redirection vulnerabilities\n// and ensure navigation only to known routes\nconst isValidRedirect=[\"/\",\"/dashboard\",\"/profile\"].includes(redirect);navigate(redirect);}},[dispatch][(navigate,userInfo,redirect)]);// Handler for form submission\nconst submitHandler=e=>{e.preventDefault();// Prevent default form submission behavior\ndispatch(login(email,password));// Dispatch login action with form data\n};return/*#__PURE__*/_jsxs(FormContainer,{className:\"py-3\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"py-3\",children:\"Sign In\"}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{style:{margin:\"10px\"},children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{style:{margin:\"10px\"},type:\"email\",placeholder:\"Enter email\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{style:{margin:\"10px\"},children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{style:{margin:\"10px\"},type:\"password\",placeholder:\"Enter password\",value:password,onChange:e=>setPassword(e.target.value),className:\"py-3\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",style:{margin:\"10px\"},children:\"Sign In\"})]}),/*#__PURE__*/_jsx(Row,{className:\"py-3\",children:/*#__PURE__*/_jsxs(Col,{children:[\"New Student?\",\" \",/*#__PURE__*/_jsx(Link,{to:redirectInUrl?\"/register/student?redirect=\".concat(redirect):\"/register/student\",children:\"Register\"})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[\"New Teacher?\",\" \",/*#__PURE__*/_jsx(Link,{to:redirectInUrl?\"/register/teacher?redirect=\".concat(redirect):\"/register/teacher\",children:\"Register\"})]})})]});};export default LoginScreen;","map":{"version":3,"names":["React","useState","useEffect","Link","useLocation","useNavigate","Row","Col","Button","Form","useSelector","useDispatch","Message","Loader","FormContainer","login","jsx","_jsx","jsxs","_jsxs","LoginScreen","navigate","search","email","setEmail","password","setPassword","dispatch","userLogin","state","loading","error","userInfo","redirectInUrl","URLSearchParams","get","redirect","isValidRedirect","includes","submitHandler","e","preventDefault","className","children","variant","onSubmit","Group","controlId","Label","style","margin","Control","type","placeholder","value","onChange","target","to","concat"],"sources":["C:/Users/oreld/git/Teach-Me/frontend/src/screens/LoginScreen.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport { Row, Col, Button, Form } from \"react-bootstrap\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport Message from \"../components/Message\";\r\nimport Loader from \"../components/Loader\";\r\nimport FormContainer from \"../components/FormContainer\";\r\nimport { login } from \"../actions/userActions\";\r\n\r\nconst LoginScreen = () => {\r\n  // Hooks for navigation and accessing URL parameters\r\n  const navigate = useNavigate();\r\n  const { search } = useLocation();\r\n\r\n  // State for form inputs\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  // Redux hooks for state management and dispatching actions\r\n  const dispatch = useDispatch();\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { loading, error, userInfo } = userLogin;\r\n\r\n  // // Extracting the \"redirect\" parameter from URL, defaulting to home (\"/\") if not found\r\n  // const redirectInUrl = new URLSearchParams(search);\r\n  // const redirect = redirectInUrl.get(\"redirect\") || \"/\";\r\n  const redirectInUrl = new URLSearchParams(search).get('redirect');\r\n  const redirect = redirectInUrl ? redirectInUrl : '/';\r\n\r\n  // useEffect to handle redirection post-login based on \"userInfo\" state\r\n  useEffect(() => {\r\n    if (userInfo) {\r\n      // Validation for redirect to prevent open redirection vulnerabilities\r\n      // and ensure navigation only to known routes\r\n      const isValidRedirect = [\"/\", \"/dashboard\", \"/profile\"].includes(redirect);\r\n      navigate(redirect);\r\n    }\r\n  }, [dispatch][navigate, userInfo, redirect]);\r\n\r\n  // Handler for form submission\r\n  const submitHandler = (e) => {\r\n    e.preventDefault(); // Prevent default form submission behavior\r\n    dispatch(login(email, password)); // Dispatch login action with form data\r\n  };\r\n\r\n  return (\r\n    <FormContainer className=\"py-3\">\r\n      <h1 className=\"py-3\">Sign In</h1>\r\n      {error && <Message variant=\"danger\">{error}</Message>}\r\n      {loading && <Loader />}\r\n      <Form onSubmit={submitHandler}>\r\n        <Form.Group controlId=\"email\">\r\n          <Form.Label style={{ margin: \"10px\" }}>Email Address</Form.Label>\r\n          <Form.Control\r\n            style={{ margin: \"10px\" }}\r\n            type=\"email\"\r\n            placeholder=\"Enter email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          ></Form.Control>\r\n        </Form.Group>\r\n\r\n        <Form.Group controlId=\"password\">\r\n          <Form.Label style={{ margin: \"10px\" }}>Password</Form.Label>\r\n          <Form.Control\r\n            style={{ margin: \"10px\" }}\r\n            type=\"password\"\r\n            placeholder=\"Enter password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            className=\"py-3\"\r\n          ></Form.Control>\r\n        </Form.Group>\r\n\r\n        <Button type=\"submit\" variant=\"primary\" style={{ margin: \"10px\" }}>\r\n          Sign In\r\n        </Button>\r\n      </Form>\r\n\r\n      <Row className=\"py-3\">\r\n        <Col>\r\n          New Student?{\" \"}\r\n          <Link to={redirectInUrl ? `/register/student?redirect=${redirect}` : \"/register/student\"}>\r\n            Register\r\n          </Link>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          New Teacher?{\" \"}\r\n          <Link to={redirectInUrl ? `/register/teacher?redirect=${redirect}` : \"/register/teacher\"}>\r\n            Register\r\n          </Link>\r\n        </Col>\r\n      </Row>\r\n    </FormContainer>\r\n  );\r\n};\r\n\r\nexport default LoginScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}